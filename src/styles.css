@import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap');
:root{
  --accent:#ff6b6b;
  --accent-2:#ffd166;
  --bg:#f3f7ff;
  --card:#ffffff;
  --muted:#6b7280;
}

/* Global button defaults — ensure buttons are visible and accessible */
button{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:12px;background:linear-gradient(90deg,#fff,#f8fafc);color:#111;border:1px solid rgba(16,24,40,0.06);cursor:pointer;font-weight:700;font-family:inherit}
/* emergency override to counter external rules that might hide buttons */
button{visibility:visible !important;display:inline-flex !important;opacity:1 !important;color:#111 !important}
button:focus{outline:3px solid rgba(99,102,241,0.18)}
button[disabled]{opacity:0.6;cursor:not-allowed}

body{font-family:'Baloo 2', system-ui,Segoe UI,Roboto,Arial; background:linear-gradient(135deg,#fef6f0 0%, #f3f7ff 100%); margin:0; color:#1f2937}
.app{max-width:900px;margin:28px auto;padding:20px;position:relative}
.app:before{content:'';position:absolute;left:-60px;top:-40px;width:260px;height:260px;background:radial-gradient(circle at 30% 30%, rgba(255,214,170,0.55), rgba(255,214,170,0) 40%);border-radius:50%}
.app:after{content:'';position:absolute;right:-40px;bottom:-40px;width:220px;height:220px;background:radial-gradient(circle at 70% 70%, rgba(193,232,255,0.5), rgba(193,232,255,0) 30%);border-radius:50%}
.header{display:flex;align-items:center;justify-content:space-between;padding:12px 8px}
.brand{font-size:1.25rem}
.greeting{font-weight:600;color:var(--muted)}

/* Hero / welcome */
.welcome-card{background:var(--card);border-radius:18px;padding:24px;margin:16px 0;text-align:center;box-shadow:0 8px 24px rgba(16,24,40,0.06)}
.welcome-card .hero-emoji{font-size:48px;margin-bottom:8px}
.welcome-card h2{margin:6px 0 4px}
.welcome-card .sub{color:var(--muted);margin-bottom:12px}
.welcome-card .name-input{display:flex;gap:10px;justify-content:center;align-items:center}
.welcome-card input{padding:10px 12px;border-radius:10px;border:1px solid #e5e7eb;width:180px;font-size:1rem}
.welcome-card .big.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;border:none}
.welcome-card .help{color:var(--muted);font-size:0.9rem;margin-top:10px}

/* Language selection */
.language-selection.card{background:var(--card);padding:20px;border-radius:16px;box-shadow:0 6px 18px rgba(16,24,40,0.06);text-align:center}
.ls-title{font-size:1.2rem;margin:0}
.ls-sub{color:var(--muted);margin:6px 0 14px}
.buttons{display:flex;gap:12px;justify-content:center}
.mode-card{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;padding:16px;width:160px;border-radius:14px;background:linear-gradient(180deg, #fff, #f8fafc);border:1px solid #f1f5f9;box-shadow:0 4px 12px rgba(16,24,40,0.04);cursor:pointer}
.mode-card .emoji{font-size:28px}
.mode-card .label{font-weight:700}
.mode-card:hover{transform:translateY(-4px);box-shadow:0 10px 28px rgba(16,24,40,0.08)}
.hint{color:var(--muted);margin-top:12px}

/* Question card */
.question-card{background:var(--card);padding:28px;border-radius:18px;box-shadow:0 18px 40px rgba(16,24,40,0.08);max-width:620px;margin:28px auto}

/* hero title + play controls */
.hero{display:flex;flex-direction:column;align-items:center;gap:18px;padding:8px}
.question-title{font-size:44px;font-weight:800;color:#9b6cff;letter-spacing:0.6px}
.play-row{display:flex;gap:28px;align-items:center}
.play-item{display:flex;flex-direction:column;align-items:center;gap:8px}
.play-circle{width:72px;height:72px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:1.45rem;box-shadow:0 8px 20px rgba(16,24,40,0.08);cursor:pointer;border:none}
.play-circle.primary{background:linear-gradient(180deg,#b88fff,#8f5af8);color:white}
.play-circle.secondary{background:white;border:1px solid #f1e7ff;color:#6b528f}
.play-label{font-size:0.9rem;color:var(--muted)}
.play-error{margin-top:8px;color:#6b2a2a;background:rgba(255,230,230,0.9);padding:8px 12px;border-radius:10px;font-weight:700}

.question-text{font-weight:700;margin:12px 0;text-align:center;color:var(--muted)}

/* options as pastel rounded pills */
.options{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:20px}
.option{padding:18px;border-radius:14px;background:#fff;border:none;font-size:1.05rem;text-align:center;min-height:64px;transition:transform .18s ease, box-shadow .18s ease;font-weight:800}
.option:active{transform:scale(0.98)}

/* pastel backgrounds by position (keeps visuals consistent) */
.options .option:nth-child(1){background:#e9d8fd;color:#3f2a6d}
.options .option:nth-child(2){background:#f8d7e1;color:#472738}
.options .option:nth-child(3){background:#f7eadb;color:#5a3f2b}
.options .option:nth-child(4){background:#d7f3e8;color:#254536}

.option.correct{border-radius:14px;box-shadow:0 10px 30px rgba(34,197,94,0.12);animation:pop .6s ease}
.option.wrong{border-radius:14px;box-shadow:0 8px 20px rgba(239,68,68,0.08);animation:shake .5s ease}
.option.disabled{opacity:0.7}

@media (max-width:480px){
  .question-title{font-size:28px}
  .play-circle{width:56px;height:56px;font-size:1.2rem}
  .options .option:nth-child(1), .options .option:nth-child(2), .options .option:nth-child(3), .options .option:nth-child(4){font-size:1rem}
}

@keyframes pop{0%{transform:scale(.96)}50%{transform:scale(1.06)}100%{transform:scale(1)}}
@keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-4px)}100%{transform:translateX(0)}}

/* misc */
.rtl{direction:rtl}
.scoreboard{display:flex;gap:12px;align-items:center}
.footer{margin-top:20px;text-align:center}
.instructions{padding:20px}
.stacked-problem{width:220px}
.parent-dashboard{background:var(--card);padding:12px;border-radius:10px}
.avatar-banner{position:relative}
.avatar-banner .avatar{font-size:2.2rem;display:inline-block;transition:transform .3s ease}
.avatar.react-correct{animation:pop .6s ease}
.avatar.react-wrong{animation:shake .6s ease}
.avatar.react-unlock{animation:pop .9s ease}

.badge-toast{position:fixed;left:50%;transform:translateX(-50%);bottom:28px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;padding:10px 14px;border-radius:999px;box-shadow:0 8px 28px rgba(16,24,40,0.14);font-weight:700}

/* game card and back button */
.game-card{margin-top:16px;background:linear-gradient(180deg,#fff,#fbfff8);padding:20px;border-radius:14px;box-shadow:0 12px 30px rgba(16,24,40,0.06)}
.back-btn{
  height: 34px;
  padding: 0 12px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.08);
  background: #fff;
  box-shadow: 0 6px 16px rgba(0,0,0,0.06);
  cursor: pointer;
  font-weight: 600;
}
.back-btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(16,24,40,0.06)}

/* scoreboard progress */
.scoreboard{display:flex;gap:12px;align-items:center}
.scoreboard .bar{width:160px;height:10px;background:#f1f5f9;border-radius:10px;overflow:hidden}
.scoreboard .fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width .4s ease}
.scoreboard .milestone{font-size:0.85rem;color:var(--muted)}

/* badge and confetti */
.confetti-wrap{position:fixed;left:0;right:0;top:20%;pointer-events:none;z-index:9999;display:flex;justify-content:center}
.confetti-piece{width:10px;height:14px;margin:2px;display:inline-block;transform-origin:center;animation:confetti 1800ms linear infinite}
.confetti-piece:before{content:'';display:block;width:100%;height:100%;background:var(--accent);border-radius:2px}
.confetti-piece.piece-1:before{background:#ffd166}
.confetti-piece.piece-2:before{background:#f7a8b8}
.confetti-piece.piece-3:before{background:#9ae6b4}
.confetti-piece.piece-4:before{background:#93c5fd}
.confetti-piece.piece-5:before{background:#fbcfe8}
.confetti-piece.piece-6:before{background:#fde68a}
.confetti-piece.piece-7:before{background:#c7b2ff}



.achievements-screen {
  width: 100%;
  padding: 14px 18px 22px;
  background: linear-gradient(180deg, #fbf7ff 0%, #ffffff 60%);
  min-height: 100%;
}

/* TOP BAR */
.ach-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 6px 0 14px;
}

.ach-icon-btn {
  border: none;
  background: transparent;
  font-size: 20px;
  cursor: pointer;
  opacity: 0.7;
  padding: 6px 8px;
  border-radius: 10px;
}
.ach-icon-btn:hover {
  opacity: 1;
  background: rgba(0,0,0,0.04);
}

.ach-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

/* “שאלה 1” */
.ach-question {
  font-size: 13px;
  opacity: 0.55;
}

/* chips row */
.ach-chips {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* medal mini block */
.ach-medal {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  min-width: 78px;
}
.ach-medal-emoji {
  font-size: 18px;
}
.ach-medal-text {
  font-size: 12px;
  opacity: 0.6;
}

/* chip base */
.ach-chip {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  border-radius: 999px;
  background: #f4eefc;
  box-shadow: 0 6px 18px rgba(0,0,0,0.04);
  min-height: 40px;
}

.ach-chip-soft {
  background: #f7f2ff;
}

.ach-chip-wide {
  background: #efe7fb;
  min-width: 140px;
  justify-content: center;
}

.ach-chip-num {
  font-weight: 700;
  font-size: 16px;
}

.ach-chip-icon {
  font-size: 16px;
  opacity: 0.75;
}

.ach-chip-label {
  font-size: 13px;
  opacity: 0.65;
}

/* badges */
.ach-badges {
  margin-top: 18px;
}

.ach-badges-title {
  font-weight: 700;
  margin-bottom: 10px;
  opacity: 0.85;
}

.ach-muted {
  opacity: 0.6;
  padding: 10px 0;
}

.ach-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 10px;
}

.badge-card {
  border-radius: 16px;
  background: #ffffff;
  border: 1px solid rgba(0,0,0,0.06);
  padding: 12px;
  box-shadow: 0 10px 24px rgba(0,0,0,0.04);
  display: flex;
  align-items: center;
  gap: 10px;
}

.badge-emoji {
  font-size: 20px;
}

.badge-name {
  font-size: 14px;
  opacity: 0.85;
}

/* מרכז הכותרת + צ׳יפים */
.ach-center{
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

/* חדש: עטיפה לכותרת שאלה */
.ach-question-wrap{
  text-align: center;
  margin-top: 2px;
}

/* חדש: שאלה גדולה ובולטת */
.ach-question-big{
  font-size: 28px;
  font-weight: 800;
  letter-spacing: .2px;
  color: #1f1f1f;
  line-height: 1.1;
}

/* חדש: שורת משנה קטנה */
.ach-question-sub{
  margin-top: 6px;
  font-size: 13px;
  color: rgba(0,0,0,0.55);
}

/* צ׳יפים: קצת יותר "נשימה" ועקביות */
.ach-chips{
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
}

/* אם כבר יש לך הגדרות לצ׳יפ, רק לוודא שהן נראות פרימיום */
.ach-chip,
.ach-medal{
  height: 42px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.06);
  background: rgba(255,255,255,0.85);
  box-shadow: 0 10px 22px rgba(0,0,0,0.06);
  padding: 0 14px;
}
.ach-top{
  position: sticky;
  top: 0;
  z-index: 10;
  background: rgba(251,246,242,0.75);
  backdrop-filter: blur(10px);
}

.topbar-left{
  display:flex;
  gap:8px;
  align-items:center;
}


/* Achievements ברירת מחדל (מסך מלא) – אם כבר יש, לא חייב לשנות */
.achievements-screen{
  /* אל תכריח רוחב/רקע כאן אם זה דופק את GameShell */
}

/* מעטפת לתוכן */
.ach-body{
  padding: 14px 18px 28px;
}

/* קומפקט: נטמע בתוך ה-topbar בלי לשבור פרופורציות */
.ach-body-compact{
  padding: 0;
}

/* קומפקט: מבטל רקעים/גבולות שמרגישים כמו "מסך בתוך מסך" */
.topbar .achievements-screen{
  background: transparent;
  min-height: unset;
}

/* קומפקט: הצגה כ"שורת צ'יפים" נקייה */
.topbar .ach-badges{
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  margin: 0;
  max-width: none;
}

/* קומפקט: להסתיר את כותרת "הישגים" והטקסטים הארוכים בתוך ה-topbar */
.topbar .ach-badges-title,
.topbar .ach-muted{
  display: none;
}

/* קומפקט: הצ'יפים נשארים בשורה יפה בתוך ה-topbar */
.topbar .ach-chips{
  gap: 8px;
  flex-wrap: nowrap;
}

/* קומפקט: להקטין קצת את הצ'יפים כדי לא לשבור topbar */
.topbar .ach-chip,
.topbar .ach-medal{
  height: 34px;
  padding: 0 12px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.06);
}



@keyframes confetti{0%{transform:translateY(0) rotate(0)}100%{transform:translateY(520px) rotate(480deg)}}

.badge-card{background:linear-gradient(90deg,#fff,#f8fafc);border-radius:12px;padding:10px;display:flex;align-items:center;gap:10px;box-shadow:0 8px 20px rgba(16,24,40,0.04)}
.badge-emoji{font-size:1.3rem}
.badge-name{font-weight:700}

/* welcome decorations */
.welcome-decor{display:flex;gap:8px;justify-content:center;margin-bottom:12px;font-size:24px}

/* tiny helpers */
.sm{font-size:0.85rem;color:var(--muted)}

/* confetti z-index for small screens */
@media (max-width:480px){
  .confetti-wrap{top:6%}
}

/* small screens */
@media (max-width:480px){
  .buttons{flex-direction:column}
  .mode-card{width:100%}
  .app{padding:12px}
}

